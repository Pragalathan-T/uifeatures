{"ast":null,"code":"import React,{useEffect,useState}from'react';import api from'../utils/api';import'./AttemptHistory.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function AttemptHistory(_ref){let{studentId=1}=_ref;const[page,setPage]=useState(0);const[size]=useState(10);const[data,setData]=useState({content:[],totalPages:0});const[error,setError]=useState(null);const[sortBy,setSortBy]=useState('startTime');const[sortDir,setSortDir]=useState('desc');useEffect(()=>{api.getStudentExamHistory(studentId,{page,size,sortBy,sortDir}).then(res=>setData(res.data)).catch(()=>setError('Failed to load history'));},[studentId,page,size,sortBy,sortDir]);if(error)return/*#__PURE__*/_jsx(\"div\",{className:\"history\",children:/*#__PURE__*/_jsx(\"p\",{className:\"history__error\",children:error})});return/*#__PURE__*/_jsxs(\"div\",{className:\"history max-w-6xl mx-auto p-4 md:p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 mb-4\",children:\"Attempt History\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 mb-3 flex-wrap\",children:[/*#__PURE__*/_jsxs(\"select\",{className:\"border rounded-lg px-3 py-2\",value:sortBy,onChange:e=>{setPage(0);setSortBy(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"startTime\",children:\"Sort: Started\"}),/*#__PURE__*/_jsx(\"option\",{value:\"endTime\",children:\"Sort: Ended\"}),/*#__PURE__*/_jsx(\"option\",{value:\"score\",children:\"Sort: Score\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"rounded-full px-4 py-2 border bg-white hover:bg-gray-50\",onClick:()=>setSortDir(d=>d==='asc'?'desc':'asc'),children:[\"Dir: \",sortDir.toUpperCase()]})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"history__table w-full border border-gray-200 rounded-xl overflow-hidden\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-50 text-left\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"p-2\",children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2\",children:\"Exam\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2\",children:\"Score\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2\",children:\"Started\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2\",children:\"Ended\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:data.content.map(row=>{var _row$exam,_row$score,_row$startTime,_row$endTime;return/*#__PURE__*/_jsxs(\"tr\",{className:\"odd:bg-white even:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"p-2\",children:row.studentExamId}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2\",children:((_row$exam=row.exam)===null||_row$exam===void 0?void 0:_row$exam.title)||'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2\",children:(_row$score=row.score)!==null&&_row$score!==void 0?_row$score:'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2\",children:row.status}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2\",children:(_row$startTime=row.startTime)!==null&&_row$startTime!==void 0?_row$startTime:'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2\",children:(_row$endTime=row.endTime)!==null&&_row$endTime!==void 0?_row$endTime:'-'})]},row.studentExamId);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"history__pager mt-4 flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"rounded-full px-4 py-2 border disabled:opacity-50\",onClick:()=>setPage(Math.max(0,page-1)),disabled:page===0,children:\"Prev\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Page \",page+1,\" of \",data.totalPages]}),/*#__PURE__*/_jsx(\"button\",{className:\"rounded-full px-4 py-2 border disabled:opacity-50\",onClick:()=>setPage(Math.min(data.totalPages-1,page+1)),disabled:page+1>=data.totalPages,children:\"Next\"})]})]});}","map":{"version":3,"names":["React","useEffect","useState","api","jsx","_jsx","jsxs","_jsxs","AttemptHistory","_ref","studentId","page","setPage","size","data","setData","content","totalPages","error","setError","sortBy","setSortBy","sortDir","setSortDir","getStudentExamHistory","then","res","catch","className","children","value","onChange","e","target","onClick","d","toUpperCase","map","row","_row$exam","_row$score","_row$startTime","_row$endTime","studentExamId","exam","title","score","status","startTime","endTime","Math","max","disabled","min"],"sources":["/workspace/reactapp/src/components/AttemptHistory.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport api from '../utils/api';\nimport './AttemptHistory.css';\n\nexport default function AttemptHistory({ studentId = 1 }) {\n  const [page, setPage] = useState(0);\n  const [size] = useState(10);\n  const [data, setData] = useState({ content: [], totalPages: 0 });\n  const [error, setError] = useState(null);\n  const [sortBy, setSortBy] = useState('startTime');\n  const [sortDir, setSortDir] = useState('desc');\n\n  useEffect(() => {\n    api.getStudentExamHistory(studentId, { page, size, sortBy, sortDir })\n      .then(res => setData(res.data))\n      .catch(() => setError('Failed to load history'));\n  }, [studentId, page, size, sortBy, sortDir]);\n\n  if (error) return <div className=\"history\"><p className=\"history__error\">{error}</p></div>;\n\n  return (\n    <div className=\"history max-w-6xl mx-auto p-4 md:p-6\">\n      <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Attempt History</h2>\n      <div className=\"flex gap-3 mb-3 flex-wrap\">\n        <select className=\"border rounded-lg px-3 py-2\" value={sortBy} onChange={(e)=>{ setPage(0); setSortBy(e.target.value); }}>\n          <option value=\"startTime\">Sort: Started</option>\n          <option value=\"endTime\">Sort: Ended</option>\n          <option value=\"score\">Sort: Score</option>\n        </select>\n        <button className=\"rounded-full px-4 py-2 border bg-white hover:bg-gray-50\" onClick={()=> setSortDir(d => d === 'asc' ? 'desc' : 'asc')}>Dir: {sortDir.toUpperCase()}</button>\n      </div>\n      <table className=\"history__table w-full border border-gray-200 rounded-xl overflow-hidden\">\n        <thead>\n          <tr className=\"bg-gray-50 text-left\">\n            <th className=\"p-2\">ID</th>\n            <th className=\"p-2\">Exam</th>\n            <th className=\"p-2\">Score</th>\n            <th className=\"p-2\">Status</th>\n            <th className=\"p-2\">Started</th>\n            <th className=\"p-2\">Ended</th>\n          </tr>\n        </thead>\n        <tbody>\n          {data.content.map((row) => (\n            <tr key={row.studentExamId} className=\"odd:bg-white even:bg-gray-50\">\n              <td className=\"p-2\">{row.studentExamId}</td>\n              <td className=\"p-2\">{row.exam?.title || '-'}</td>\n              <td className=\"p-2\">{row.score ?? '-'}</td>\n              <td className=\"p-2\">{row.status}</td>\n              <td className=\"p-2\">{row.startTime ?? '-'}</td>\n              <td className=\"p-2\">{row.endTime ?? '-'}</td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n      <div className=\"history__pager mt-4 flex items-center gap-3\">\n        <button className=\"rounded-full px-4 py-2 border disabled:opacity-50\" onClick={() => setPage(Math.max(0, page - 1))} disabled={page === 0}>Prev</button>\n        <span>Page {page + 1} of {data.totalPages}</span>\n        <button className=\"rounded-full px-4 py-2 border disabled:opacity-50\" onClick={() => setPage(Math.min(data.totalPages - 1, page + 1))} disabled={page + 1 >= data.totalPages}>Next</button>\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}